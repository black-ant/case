# ![ParaView](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAACMo1E1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozQjhBN0M3QTU4QTExMUU3QjQyOUNDQ0E4NTM4MkYxNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozQjhBN0M3OTU4QTExMUU3QjQyOUNDQ0E4NTM4MkYxNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM1ODYxNTczNThBMDExRTc4Q0JFRTBDRkFFN0JDNDU3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM1ODYxNTc0NThBMDExRTc4Q0JFRTBDRkFFN0JDNDU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpS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)  ***派拉软件***

# 项目说明
> [源码](http://gitlab.paraview.cn/wuj/idm-cic)
> ## 结构说明
>  ```
>  cic-idm                                                             [pom] 根pom ,管理jar包版本与插件版本
>    Para cic Idm Common                                               [pom] 公共包 pom 
>      Para cic Idm Common Lib                                         [jar] 传输对象和枚举定义公共序列化实体 swagger 实体描述
>      Para cic Idm Common REST API                                    [jar] rest api 接口定义 api swagger 描述
>    Para cic Idm Core                                                 [pom] 核心实现关系 pom 
>      Para cic Idm Core Misc                                          [jar] 工具包和其他公共使用
>      Para cic Idm Core Persistence API                               [jar] 数据存储接口层
>      Para cic Idm Core Conversion API                                [jar] 数据转换接口层,包含数据字段过滤,字段权限过滤
>      Para cic Idm Core Security                                      [jar] 安全认证相关,鉴权
>      Para cic Idm Core Logic                                         [jar] 业务逻辑层
>      Para cic Idm Core Persistence Mybatis                           [jar] 数据存储实现层
>      Para cic Idm Core Conversion Java                               [jar] 数据转换实现层
>      Para cic Idm Core REST service                                  [jar] rest实现 
>    Para cic Idm Ext                                                  [pom] 拓展包 pom
>      Para cic Idm Ext: Swagger UI                                    [jar] swagger ui 
>      Para cic Idm Ext: Elasticsearch                                 [pom] 拓展es 搜索引擎实现(注: 待定)
>      Para cic Idm Ext: Console                                       [pom] console server 使用
>        Para cic Idm Common Lib                                       [jar] console 的传输对象
>        Para cic Idm External Console Common REST API                 [jar] console rest 接口
>        Para cic Idm Extrtnal Console REST service                    [jar] console 接口的实现
> ```

## 主要依赖
---

> ### REST 
> - 使用jaxrs2 标准 
> - 接口与实现层分离
> - [接口规范](http://wiki.paraview.cn/page/display?document_id=182) 

> ###### 主选
> - [RESTEasy Spring Boot Starter](https://github.com/resteasy/resteasy-spring-boot "git 地址") 

> ######  其他 选择

> - Jersey 
> - CXF
> - Restlet
> - spring rest

> RESTFul 性能对比 RESTFul 性能对比: 
- [CXF、Restlet、RESTEasy、Jersey对比](https://blog.csdn.net/jianxuan/article/details/6176929)
- [Java RESTful框架的性能比较](https://colobu.com/2015/11/17/Jax-RS-Performance-Comparison/)
```
- RESTEasy的性能要好于 Jersey,无论哪种嵌入式JEE容器。
- Jersey+Grizzly2和Jersey+Jetty, dropwizard性能差别不大
- dropwizard底层实际是Jersey+Jetty,性能结果也和Jersey+Jetty一样
- RESTEasy+netty (netty3)的结果并没有优于RESTEasy+undertow.，可能CPU和Memory占用上会好一些
- RESTEasy+netty4的性能远远低于RESTEasy+netty3。或许因为Netty线程池的改变。
纯netty的性能远远高于其它框架，一方面是由于没有http router的逻辑，另一方面也显示了Netty框架的优秀。如果不是实现很复杂的路由和很多的Service,不妨使用纯Netty实现高性能。
- Spring Boot太厚重了，使用Spring MVC的语法，性能只有Jersey的一半。
- Vert.x底层使用Netty,可以使用Java 8 Lambda语法，也提供了其它语言的支持，代码中增加了vertx-verticles模块，支持多核(java -jar vertx-verticles-1.0-SNAPSHOT.jar -instances 20)。 Vert.x性能也不错
```


> ### 其他

> - [swagger3](https://github.com/swagger-api/swagger-core/wiki/Swagger-2.X---Getting-started "swagger-jaxrs2")
> - [rsql-parser](https://github.com/jirutka/rsql-parser "FIQL")
> - [mybatis-rsql](https://github.com/gabrie-allaigre/component-mybatis "FIQL")

---


> ### CRM 

> ###### 主选
> ***[mybatis](https://github.com/mybatis/mybatis-3 "git 地址")***

>    ```
>     优点
>     - 灵活的CRMD 
>     - 方便sql 的修改
>    
>     缺点
>     - 大量的sql需要书写
>     - 数据库类型修改后需要重构sql
>     - 多表操作修改需要代码维护
>     - [缓存策略](https://www.jianshu.com/p/c553169c5921) 
>    ```


> ######  其他 选择
>  ***[hibernate](https://github.com/hibernate/hibernate-orm "git 地址")***

>    [说明](http://hibernate.org/orm/)

> ```
>     优点
>     - 大部分sql 不需要写
>     - 简单的sql 可以使用spring data jpa
>     - 支持多表操作不需要手动代码维护
>     - 支持ES 接入查询
>     - 支持redis 二级缓存配置
>     - 支持FIQL 查询
>     - Hibernate对对象的维护和缓存要比MyBatis好，对增删改查的对象的维护要方便。
>     - Hibernate有更好的二级缓存机制，可以使用第三方缓存。MyBatis本身提供的缓存机制不佳
>     缺点
>     - 学习成本较高
>     - 
> ```

>  ***[EclipseLink](https://github.com/eclipse-ee4j/eclipselink)***  

>    [说明](https://www.eclipse.org/eclipselink/documentation/2.7/concepts/general001.htm#CHDIJJGA)

>```
>     优点
>     - 只支持 租户隔离，可扩展实体，外部元数据源
>     缺点
>     - 小众
>```


>  ***[openjpa](https://github.com/apache/openjpa)***

>    [说明](http://openjpa.apache.org/faq.html)

> ```
>     优点
>     - 参考 hibernate 优点
>     缺点
>     - 非jpa 标准实现,部分jpa 特性不支持
>     - 学习成本较高
>     - 性能相对其他慢
> ```



[Hibernate与 MyBatis的对比](https://www.cnblogs.com/williamjie/p/9342117.html)

---
> ### DB 
> ###### 主选
> - mysql

> ######  其他 选择
> - SQLServer
> - PostgreSQL
> - Oracle
> - MongoDB


---

> ### 分表分库

> ###### 主选
> - [shardingsphere-jdbc](https://shardingsphere.apache.org/document/current/cn/quick-start/sharding-jdbc-quick-start/ "快速入门")

>      [介绍](https://shardingsphere.apache.org/document/current/cn/overview/)

>      [性能测试报告](https://shardingsphere.apache.org/document/current/cn/manual/sharding-jdbc/stress-test/)

>      [不支持](https://shardingsphere.apache.org/document/current/cn/features/read-write-split/unsupported-items/)

>      [SQL 限制](https://shardingsphere.apache.org/document/current/cn/features/sharding/use-norms/sql/)


> ###### 其他方案
> - [mybatis plugin](https://mybatis.plus/guide/tenant.html "多租户 SQL 解析器") (注: [git 地址](https://gitee.com/baomidou/mybatis-plus-samples/tree/master))

>      [介绍](https://baomidou.gitee.io/mybatis-plus-doc/#/tenant)

>      性能未知



> - [mycat](http://www.mycat.io/ "Mycat数据库分库分表中间件")

>      [介绍](https://www.cnblogs.com/joylee/p/7513038.html)

>      [性能测试报告](https://github.com/MyCATApache/Mycat-doc/tree/master/%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B%E4%B8%8E%E6%8A%A5%E5%91%8A)

---
## 架构说明


---

