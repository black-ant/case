> 项目GIT :  https://github.com/OpenConext/Mujina

> 基本流程 : 

1 请求端作为一个使用者 , 期望访问服务商的资源

2  SP 发现这是一个未认证的请求 , 此时会返回一个HTML , Form 的隐藏域中有一个 SAML 的认证请求数据包 , 实际上这里不需要手动  , HTML 会通过JS 自动执行到 IDP 中

3 通过 JS 会自动提交到 IDP 中 , 此时 IDP 接收到请求后 , 返回验证界面
( 2-3 步在浏览器端不可见 )

4 IDP 给浏览器返回一个待登录的页面

5 用户进行了认证 , 并且成功提交到 IDP

6 IDP 组装一个HTML Form , 其中包含一个Response ,Response 中有一个对成功用户的断言 (用户信息及权限) , 有认证情况 , 及私钥签名等

7  HTML 被自动提交到 SP , 前面说了 第六步的时候会同时返回一个私钥 , 这一步中  ,SP 会通过公钥校验断言是否合法

8 剩下的就是判断是一个合法用户 ,然后重定向到请求的页面中




