<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Workflow Demo - æ™ºèƒ½ä½“å·¥ä½œæµæ¼”ç¤º</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 30px; text-align: center; }
        .workflow-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { padding: 10px 20px; background: white; border: 2px solid #ddd; border-radius: 8px 8px 0 0; cursor: pointer; }
        .tab.active { background: #3498db; color: white; border-color: #3498db; }
        .demo-section { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .demo-section h2 { color: #2c3e50; margin-bottom: 15px; font-size: 18px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #555; font-weight: 500; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        textarea { min-height: 100px; resize: vertical; font-family: inherit; }
        button { background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #2980b9; }
        .response { margin-top: 15px; padding: 15px; background: #f8f9fa; border-left: 4px solid #3498db; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; }
        .error { border-left-color: #e74c3c; background: #fee; }
        .loading { color: #3498db; font-style: italic; }
        .workflow-diagram { background: #ecf0f1; padding: 15px; border-radius: 4px; margin: 10px 0; font-family: monospace; font-size: 13px; }
        .example-queries { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .example-btn { background: #ecf0f1; color: #2c3e50; padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer; border: 1px solid #bdc3c7; }
        .example-btn:hover { background: #d5dbdb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– Agent Workflow Demo - æ™ºèƒ½ä½“å·¥ä½œæµæ¼”ç¤º</h1>

        <div class="workflow-tabs">
            <div class="tab active" onclick="showTab('chain')">é“¾å¼å·¥ä½œæµ</div>
            <div class="tab" onclick="showTab('parallel')">å¹¶è¡Œå·¥ä½œæµ</div>
            <div class="tab" onclick="showTab('routing')">è·¯ç”±å·¥ä½œæµ</div>
        </div>

        <!-- é“¾å¼å·¥ä½œæµ -->
        <div id="chainTab" class="workflow-content">
            <div class="demo-section">
                <h2>1. æ–‡æ¡£åˆ†æé“¾</h2>
                <div class="workflow-diagram">æ–‡æ¡£ â†’ æå–å…³é”®ä¿¡æ¯ â†’ æƒ…æ„Ÿåˆ†æ â†’ ç”Ÿæˆæ‘˜è¦</div>
                <div class="input-group">
                    <label>è¾“å…¥æ–‡æ¡£å†…å®¹ï¼š</label>
                    <textarea id="chainDoc" placeholder="ä¾‹å¦‚ï¼šäººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜ä¸–ç•Œ...">äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜ä¸–ç•Œï¼Œå®ƒåœ¨åŒ»ç–—ã€æ•™è‚²ã€äº¤é€šç­‰é¢†åŸŸéƒ½æœ‰å¹¿æ³›åº”ç”¨ã€‚</textarea>
                </div>
                <button onclick="analyzeDocument()">åˆ†ææ–‡æ¡£</button>
                <div id="chainDocResponse"></div>
            </div>

            <div class="demo-section">
                <h2>2. å†…å®¹åˆ›ä½œé“¾</h2>
                <div class="workflow-diagram">ä¸»é¢˜ â†’ å¤´è„‘é£æš´ â†’ åˆ›å»ºå¤§çº² â†’ æ’°å†™å†…å®¹ â†’ æ¶¦è‰²</div>
                <div class="input-group">
                    <label>è¾“å…¥ä¸»é¢˜ï¼š</label>
                    <input type="text" id="chainContent" placeholder="ä¾‹å¦‚ï¼šäººå·¥æ™ºèƒ½çš„æœªæ¥">
                    <div class="example-queries">
                        <span class="example-btn" onclick="setQuery('chainContent', 'äººå·¥æ™ºèƒ½çš„æœªæ¥')">AI æœªæ¥</span>
                        <span class="example-btn" onclick="setQuery('chainContent', 'å¯æŒç»­å‘å±•')">å¯æŒç»­å‘å±•</span>
                    </div>
                </div>
                <button onclick="createContent()">åˆ›ä½œå†…å®¹</button>
                <div id="chainContentResponse"></div>
            </div>

            <div class="demo-section">
                <h2>3. ä»£ç å®¡æŸ¥é“¾</h2>
                <div class="workflow-diagram">ä»£ç  â†’ è¯­æ³•æ£€æŸ¥ â†’ æ€§èƒ½åˆ†æ â†’ å®‰å…¨å®¡æŸ¥ â†’ ç»¼åˆå»ºè®®</div>
                <div class="input-group">
                    <label>è¾“å…¥ä»£ç ï¼š</label>
                    <textarea id="chainCode" placeholder="ç²˜è´´ä½ çš„ä»£ç ...">public class Hello {
    public static void main(String[] args) {
        System.out.println("Hello World");
    }
}</textarea>
                </div>
                <button onclick="reviewCode()">å®¡æŸ¥ä»£ç </button>
                <div id="chainCodeResponse"></div>
            </div>
        </div>

        <!-- å¹¶è¡Œå·¥ä½œæµ -->
        <div id="parallelTab" class="workflow-content" style="display:none;">
            <div class="demo-section">
                <h2>1. å¸‚åœºåˆ†æï¼ˆå¹¶è¡Œï¼‰</h2>
                <div class="workflow-diagram">å¸‚åœºæ•°æ® â†’ â”Œâ”€ æŠ€æœ¯åˆ†æ â”€â”
           â”œâ”€ åŸºæœ¬é¢åˆ†æ â”€â”¤ â†’ ç»¼åˆåˆ†æ â†’ æŠ•èµ„å»ºè®®
           â”œâ”€ æƒ…ç»ªåˆ†æ â”€â”¤
           â””â”€ é£é™©è¯„ä¼° â”€â”˜</div>
                <div class="input-group">
                    <label>è¾“å…¥å¸‚åœºæ•°æ®ï¼š</label>
                    <textarea id="parallelMarket" placeholder="ä¾‹å¦‚ï¼šè‚¡ç¥¨ä»£ç  AAPLï¼Œå½“å‰ä»·æ ¼ $150...">è‚¡ç¥¨ä»£ç  AAPLï¼Œå½“å‰ä»·æ ¼ $150ï¼Œè¿‘æœŸä¸Šæ¶¨ 5%ï¼Œå¸‚å€¼ 2.5 ä¸‡äº¿ç¾å…ƒã€‚</textarea>
                </div>
                <button onclick="analyzeMarket()">åˆ†æå¸‚åœº</button>
                <div id="parallelMarketResponse"></div>
            </div>

            <div class="demo-section">
                <h2>2. äº§å“è¯„ä¼°ï¼ˆå¹¶è¡Œï¼‰</h2>
                <div class="workflow-diagram">äº§å“ â†’ â”Œâ”€ ç”¨æˆ·ä½“éªŒ â”€â”
       â”œâ”€ æŠ€æœ¯å®ç° â”€â”¤
       â”œâ”€ å¸‚åœºç«äº‰åŠ› â”€â”¤ â†’ ç»¼åˆè¯„ä¼°
       â”œâ”€ å•†ä¸šä»·å€¼ â”€â”¤
       â””â”€ åˆ›æ–°æ€§ â”€â”˜</div>
                <div class="input-group">
                    <label>è¾“å…¥äº§å“æè¿°ï¼š</label>
                    <textarea id="parallelProduct" placeholder="ä¾‹å¦‚ï¼šè¿™æ˜¯ä¸€æ¬¾æ™ºèƒ½æ‰‹è¡¨...">è¿™æ˜¯ä¸€æ¬¾æ™ºèƒ½æ‰‹è¡¨ï¼Œå…·æœ‰å¥åº·ç›‘æµ‹ã€è¿åŠ¨è¿½è¸ªã€ç§»åŠ¨æ”¯ä»˜ç­‰åŠŸèƒ½ã€‚</textarea>
                </div>
                <button onclick="evaluateProduct()">è¯„ä¼°äº§å“</button>
                <div id="parallelProductResponse"></div>
            </div>

            <div class="demo-section">
                <h2>3. å¤šè§’åº¦åˆ†æï¼ˆå¹¶è¡Œï¼‰</h2>
                <div class="input-group">
                    <label>è¾“å…¥ä¸»é¢˜ï¼š</label>
                    <input type="text" id="parallelTopic" placeholder="ä¾‹å¦‚ï¼šç”µåŠ¨æ±½è½¦å¸‚åœº">
                    <div class="example-queries">
                        <span class="example-btn" onclick="setQuery('parallelTopic', 'ç”µåŠ¨æ±½è½¦å¸‚åœº')">ç”µåŠ¨æ±½è½¦</span>
                        <span class="example-btn" onclick="setQuery('parallelTopic', 'è¿œç¨‹åŠå…¬è¶‹åŠ¿')">è¿œç¨‹åŠå…¬</span>
                    </div>
                </div>
                <button onclick="analyzeParallel()">å¤šè§’åº¦åˆ†æ</button>
                <div id="parallelTopicResponse"></div>
            </div>
        </div>

        <!-- è·¯ç”±å·¥ä½œæµ -->
        <div id="routingTab" class="workflow-content" style="display:none;">
            <div class="demo-section">
                <h2>1. æ™ºèƒ½è·¯ç”±æŸ¥è¯¢</h2>
                <div class="workflow-diagram">æŸ¥è¯¢ â†’ åˆ†ç±» â†’ è·¯ç”±åˆ°ä¸“ä¸šå¤„ç†å™¨ â†’ ä¸“ä¸šå›ç­”</div>
                <div class="input-group">
                    <label>è¾“å…¥é—®é¢˜ï¼š</label>
                    <textarea id="routingQuery" placeholder="ä¾‹å¦‚ï¼šå¦‚ä½•ä¼˜åŒ– Java ä»£ç æ€§èƒ½ï¼Ÿ"></textarea>
                    <div class="example-queries">
                        <span class="example-btn" onclick="setQuery('routingQuery', 'å¦‚ä½•ä¼˜åŒ– Java ä»£ç æ€§èƒ½ï¼Ÿ')">æŠ€æœ¯é—®é¢˜</span>
                        <span class="example-btn" onclick="setQuery('routingQuery', 'å¦‚ä½•æé«˜é”€å”®é¢ï¼Ÿ')">å•†ä¸šé—®é¢˜</span>
                        <span class="example-btn" onclick="setQuery('routingQuery', 'å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—')">åˆ›æ„é—®é¢˜</span>
                    </div>
                </div>
                <button onclick="routingQuery()">æ™ºèƒ½è·¯ç”±</button>
                <div id="routingQueryResponse"></div>
            </div>

            <div class="demo-section">
                <h2>2. å¤æ‚åº¦è·¯ç”±</h2>
                <div class="workflow-diagram">æŸ¥è¯¢ â†’ è¯„ä¼°å¤æ‚åº¦ â†’ é€‰æ‹©å¤„ç†ç­–ç•¥ â†’ æ‰§è¡Œ</div>
                <div class="input-group">
                    <label>è¾“å…¥é—®é¢˜ï¼š</label>
                    <textarea id="routingComplexity" placeholder="ä¾‹å¦‚ï¼šè§£é‡Šé‡å­è®¡ç®—çš„åŸç†"></textarea>
                    <div class="example-queries">
                        <span class="example-btn" onclick="setQuery('routingComplexity', '1+1ç­‰äºå‡ ï¼Ÿ')">ç®€å•é—®é¢˜</span>
                        <span class="example-btn" onclick="setQuery('routingComplexity', 'è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸºæœ¬åŸç†')">ä¸­ç­‰é—®é¢˜</span>
                        <span class="example-btn" onclick="setQuery('routingComplexity', 'è§£é‡Šé‡å­è®¡ç®—çš„åŸç†åŠå…¶åœ¨å¯†ç å­¦ä¸­çš„åº”ç”¨')">å¤æ‚é—®é¢˜</span>
                    </div>
                </div>
                <button onclick="routingComplexity()">å¤æ‚åº¦è·¯ç”±</button>
                <div id="routingComplexityResponse"></div>
            </div>

            <div class="demo-section">
                <h2>3. æƒ…æ„Ÿè·¯ç”±</h2>
                <div class="workflow-diagram">æ¶ˆæ¯ â†’ è¯†åˆ«æƒ…æ„Ÿ â†’ é€‰æ‹©å›åº”é£æ ¼ â†’ ç”Ÿæˆå›åº”</div>
                <div class="input-group">
                    <label>è¾“å…¥æ¶ˆæ¯ï¼š</label>
                    <textarea id="routingEmotion" placeholder="ä¾‹å¦‚ï¼šæˆ‘ä»Šå¤©å¾ˆå¼€å¿ƒï¼"></textarea>
                    <div class="example-queries">
                        <span class="example-btn" onclick="setQuery('routingEmotion', 'æˆ‘ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå­¦ä¼šäº† Spring AIï¼')">å¼€å¿ƒ</span>
                        <span class="example-btn" onclick="setQuery('routingEmotion', 'æˆ‘çš„ä»£ç æ€»æ˜¯å‡ºé”™ï¼Œå¾ˆæ²®ä¸§')">æ²®ä¸§</span>
                        <span class="example-btn" onclick="setQuery('routingEmotion', 'æˆ‘ä¸æ˜ç™½è¿™ä¸ªæ¦‚å¿µ')">å›°æƒ‘</span>
                    </div>
                </div>
                <button onclick="routingEmotion()">æƒ…æ„Ÿè·¯ç”±</button>
                <div id="routingEmotionResponse"></div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8080/api/workflow';

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.workflow-content').forEach(c => c.style.display = 'none');
            event.target.classList.add('active');
            document.getElementById(tab + 'Tab').style.display = 'block';
        }

        function setQuery(elementId, query) {
            document.getElementById(elementId).value = query;
        }

        async function callAPI(endpoint, data, responseId) {
            const responseDiv = document.getElementById(responseId);
            responseDiv.innerHTML = '<div class="response loading">æ­£åœ¨å¤„ç†...</div>';
            
            try {
                const response = await fetch(`${API_BASE}${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const text = await response.text();
                responseDiv.innerHTML = `<div class="response">${text}</div>`;
            } catch (error) {
                responseDiv.innerHTML = `<div class="response error">é”™è¯¯: ${error.message}</div>`;
            }
        }

        // é“¾å¼å·¥ä½œæµ
        function analyzeDocument() {
            const content = document.getElementById('chainDoc').value;
            if (!content) return alert('è¯·è¾“å…¥æ–‡æ¡£å†…å®¹');
            callAPI('/chain/analyze-document', { content }, 'chainDocResponse');
        }

        function createContent() {
            const query = document.getElementById('chainContent').value;
            if (!query) return alert('è¯·è¾“å…¥ä¸»é¢˜');
            callAPI('/chain/create-content', { query }, 'chainContentResponse');
        }

        function reviewCode() {
            const content = document.getElementById('chainCode').value;
            if (!content) return alert('è¯·è¾“å…¥ä»£ç ');
            callAPI('/chain/review-code', { content }, 'chainCodeResponse');
        }

        // å¹¶è¡Œå·¥ä½œæµ
        function analyzeMarket() {
            const marketData = document.getElementById('parallelMarket').value;
            if (!marketData) return alert('è¯·è¾“å…¥å¸‚åœºæ•°æ®');
            callAPI('/parallel/analyze-market', { marketData }, 'parallelMarketResponse');
        }

        function evaluateProduct() {
            const content = document.getElementById('parallelProduct').value;
            if (!content) return alert('è¯·è¾“å…¥äº§å“æè¿°');
            callAPI('/parallel/evaluate-product', { content }, 'parallelProductResponse');
        }

        function analyzeParallel() {
            const input = document.getElementById('parallelTopic').value;
            if (!input) return alert('è¯·è¾“å…¥ä¸»é¢˜');
            const data = {
                input,
                perspectives: ["æŠ€æœ¯å‘å±•", "å¸‚åœºè¶‹åŠ¿", "ç¯å¢ƒå½±å“", "æ”¿ç­–æ”¯æŒ"]
            };
            callAPI('/parallel/analyze', data, 'parallelTopicResponse');
        }

        // è·¯ç”±å·¥ä½œæµ
        function routingQuery() {
            const query = document.getElementById('routingQuery').value;
            if (!query) return alert('è¯·è¾“å…¥é—®é¢˜');
            callAPI('/routing/query', { query }, 'routingQueryResponse');
        }

        function routingComplexity() {
            const query = document.getElementById('routingComplexity').value;
            if (!query) return alert('è¯·è¾“å…¥é—®é¢˜');
            callAPI('/routing/by-complexity', { query }, 'routingComplexityResponse');
        }

        function routingEmotion() {
            const query = document.getElementById('routingEmotion').value;
            if (!query) return alert('è¯·è¾“å…¥æ¶ˆæ¯');
            callAPI('/routing/by-emotion', { query }, 'routingEmotionResponse');
        }
    </script>
</body>
</html>
