# ç»Ÿä¸€é…ç½®æŒ‡å—

æ‰€æœ‰ Spring AI Demo é¡¹ç›®ç°åœ¨ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®ç®¡ç†ï¼Œåªéœ€é…ç½®ä¸€æ¬¡å³å¯ã€‚

## ğŸ¯ é…ç½®æ–¹å¼

### æ–¹å¼ 1ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

1. **å¤åˆ¶é…ç½®æ¨¡æ¿**
```bash
cp .env.example .env
```

2. **ç¼–è¾‘ .env æ–‡ä»¶**
```bash
# å¿…å¡«é¡¹
OPENAI_API_KEY=sk-your-api-key-here

# å¯é€‰é¡¹ï¼ˆå¦‚æœä½¿ç”¨ä»£ç†ï¼‰
OPENAI_BASE_URL=https://your-proxy.com/v1
```

3. **åŠ è½½ç¯å¢ƒå˜é‡**

**Windows (PowerShell)**:
```powershell
Get-Content .env | ForEach-Object {
    if ($_ -match '^([^=]+)=(.*)$') {
        [Environment]::SetEnvironmentVariable($matches[1], $matches[2], 'Process')
    }
}
```

**Windows (CMD)**:
```cmd
for /f "tokens=1,2 delims==" %%a in (.env) do set %%a=%%b
```

**Linux/Mac**:
```bash
export $(cat .env | xargs)
```

### æ–¹å¼ 2ï¼šç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡

**Windows**:
```cmd
set OPENAI_API_KEY=sk-your-api-key-here
set OPENAI_BASE_URL=https://your-proxy.com/v1
```

**Linux/Mac**:
```bash
export OPENAI_API_KEY=sk-your-api-key-here
export OPENAI_BASE_URL=https://your-proxy.com/v1
```

### æ–¹å¼ 3ï¼šä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶

å¦‚æœä½ åªæƒ³ä¸ºæŸä¸ªé¡¹ç›®å•ç‹¬é…ç½®ï¼Œå¯ä»¥ä¿®æ”¹è¯¥é¡¹ç›®çš„ `application.yml` æ–‡ä»¶ã€‚

## ğŸ“‹ é…ç½®é¡¹è¯´æ˜

### å¿…å¡«é…ç½®

| é…ç½®é¡¹ | ç¯å¢ƒå˜é‡ | è¯´æ˜ |
|--------|---------|------|
| API Key | `OPENAI_API_KEY` | OpenAI API å¯†é’¥ |

### å¯é€‰é…ç½®

| é…ç½®é¡¹ | ç¯å¢ƒå˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|---------|--------|------|
| Base URL | `OPENAI_BASE_URL` | `https://api.openai.com` | API ç«¯ç‚¹åœ°å€ |
| Model | `OPENAI_MODEL` | `gpt-3.5-turbo` | ä½¿ç”¨çš„æ¨¡å‹ |
| Temperature | `OPENAI_TEMPERATURE` | `0.7` | æ¸©åº¦å‚æ•° |
| Embedding Model | `OPENAI_EMBEDDING_MODEL` | `text-embedding-ada-002` | åµŒå…¥æ¨¡å‹ |
| Server Port | `SERVER_PORT` | `8080` | æœåŠ¡å™¨ç«¯å£ |

## ğŸŒ ä½¿ç”¨ä»£ç†æˆ–è‡ªå®šä¹‰ç«¯ç‚¹

å¦‚æœä½ ä½¿ç”¨ä»£ç†æœåŠ¡æˆ–è‡ªå®šä¹‰çš„ OpenAI å…¼å®¹ç«¯ç‚¹ï¼Œåªéœ€è®¾ç½® `OPENAI_BASE_URL`ï¼š

```bash
# ä½¿ç”¨ä»£ç†
export OPENAI_BASE_URL=https://your-proxy.com/v1

# ä½¿ç”¨ Azure OpenAI
export OPENAI_BASE_URL=https://your-resource.openai.azure.com/openai/deployments/your-deployment

# ä½¿ç”¨æœ¬åœ° LLMï¼ˆå¦‚ LocalAIï¼‰
export OPENAI_BASE_URL=http://localhost:8080/v1
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨ä»»æ„é¡¹ç›®

é…ç½®å¥½ç¯å¢ƒå˜é‡åï¼Œå¯åŠ¨ä»»æ„é¡¹ç›®ï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd Sample-Spring-AI

# å¯åŠ¨é¡¹ç›®
mvn spring-boot:run
```

æ‰€æœ‰é¡¹ç›®éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®ï¼

## ğŸ“ é¡¹ç›®ç‰¹å®šé…ç½®

æŸäº›é¡¹ç›®éœ€è¦é¢å¤–çš„é…ç½®ï¼š

### Multi-LLM-Provider
éœ€è¦é…ç½®å…¶ä»– LLM æä¾›å•†çš„ API Keyï¼š
```bash
export AZURE_OPENAI_API_KEY=your-azure-key
export ANTHROPIC_API_KEY=sk-ant-your-key
export VERTEX_AI_PROJECT_ID=your-gcp-project
```

### RAG-Demo (ä½¿ç”¨ PGVector)
éœ€è¦é…ç½® PostgreSQLï¼š
```bash
export POSTGRES_HOST=localhost
export POSTGRES_USER=postgres
export POSTGRES_PASSWORD=postgres
export VECTOR_STORE_TYPE=pgvector
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¸è¦æäº¤ .env æ–‡ä»¶åˆ° Git**
   - `.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`
   - åªæäº¤ `.env.example` æ¨¡æ¿

2. **ä½¿ç”¨ç¯å¢ƒå˜é‡è€Œéç¡¬ç¼–ç **
   - æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡

3. **å®šæœŸè½®æ¢ API Key**
   - å®šæœŸæ›´æ¢ API Key
   - ä½¿ç”¨ä¸åŒçš„ Key ç”¨äºå¼€å‘å’Œç”Ÿäº§

## ğŸ“ é…ç½®ä¼˜å…ˆçº§

é…ç½®çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š

1. ç¯å¢ƒå˜é‡
2. é¡¹ç›®çš„ `application.yml`
3. é€šç”¨é…ç½® `application-common.yml`
4. é»˜è®¤å€¼

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ

A: å¯åŠ¨ä»»æ„é¡¹ç›®ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¸­çš„é…ç½®ä¿¡æ¯ï¼š
```
Using OpenAI base URL: https://your-proxy.com/v1
Using model: gpt-3.5-turbo
```

### Q: å¦‚ä½•ä¸ºä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„é…ç½®ï¼Ÿ

A: åœ¨é¡¹ç›®çš„ `application.yml` ä¸­è¦†ç›–ç‰¹å®šé…ç½®ï¼š
```yaml
spring:
  ai:
    openai:
      chat:
        options:
          model: gpt-4  # åªåœ¨è¿™ä¸ªé¡¹ç›®ä½¿ç”¨ GPT-4
```

### Q: å¦‚ä½•ä¸´æ—¶ä¿®æ”¹é…ç½®ï¼Ÿ

A: ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š
```bash
mvn spring-boot:run -Dspring-boot.run.arguments="--spring.ai.openai.base-url=https://other-url.com"
```

## ğŸ“ é…ç½®æ£€æŸ¥æ¸…å•

å¯åŠ¨é¡¹ç›®å‰ï¼Œç¡®ä¿ï¼š

- [ ] å·²è®¾ç½® `OPENAI_API_KEY`
- [ ] å¦‚ä½¿ç”¨ä»£ç†ï¼Œå·²è®¾ç½® `OPENAI_BASE_URL`
- [ ] å¦‚ä½¿ç”¨ç‰¹æ®Šæ¨¡å‹ï¼Œå·²è®¾ç½® `OPENAI_MODEL`
- [ ] ç«¯å£ 8080 æœªè¢«å ç”¨ï¼ˆæˆ–å·²ä¿®æ”¹ `SERVER_PORT`ï¼‰

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [OpenAI API æ–‡æ¡£](https://platform.openai.com/docs)
- [Spring Boot å¤–éƒ¨åŒ–é…ç½®](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config)
- [Spring AI é…ç½®](https://docs.spring.io/spring-ai/reference/)
