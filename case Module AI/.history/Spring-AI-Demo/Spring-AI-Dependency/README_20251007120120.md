# Spring AI Dependency Demo

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Spring AI ä¾èµ–å±•ç¤ºé¡¹ç›®ï¼ŒåŸºäº Spring AI **0.8.1** ç‰ˆæœ¬ï¼Œå±•ç¤ºäº†æ‰€æœ‰å®˜æ–¹ Maven ä¾èµ–çš„ä½¿ç”¨æ–¹å¼ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
Spring-AI-Dependency/
â”œâ”€â”€ pom.xml                          # Maven ä¾èµ–é…ç½®
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ Demo.md                          # ä¾èµ–è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ DEPENDENCY_CATEGORIES.md         # ä¾èµ–åˆ†ç±»è¯´æ˜
â”œâ”€â”€ QUICK_START.md                   # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/example/springaidep/
â”‚   â”‚   â”‚   â”œâ”€â”€ SpringAiDependencyApplication.java
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatModelController.java      # èŠå¤©æ¨¡å‹ç¤ºä¾‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmbeddingController.java      # åµŒå…¥æ¨¡å‹ç¤ºä¾‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VectorStoreController.java    # å‘é‡å­˜å‚¨ç¤ºä¾‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DocumentLoaderController.java # æ–‡æ¡£åŠ è½½ç¤ºä¾‹
â”‚   â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MultiModelService.java        # å¤šæ¨¡å‹æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VectorStoreService.java       # å‘é‡å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DocumentService.java          # æ–‡æ¡£å¤„ç†æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚   â”‚       â””â”€â”€ SpringAiConfig.java           # Spring AI é…ç½®
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml                   # åº”ç”¨é…ç½®
â”‚   â”‚       â””â”€â”€ application-dev.yml               # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/com/example/springaidep/
â”‚           â””â”€â”€ SpringAiDependencyApplicationTests.java
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Java 21+
- Maven 3.8+
- Spring Boot 3.2.5
- Spring AI 0.8.1

### 2. é…ç½® API Keys

åœ¨ `application.yml` ä¸­é…ç½®ä½ éœ€è¦ä½¿ç”¨çš„ LLM æä¾›å•†çš„ API Keyï¼š

```yaml
spring:
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:your-api-key}
    azure:
      openai:
        api-key: ${AZURE_OPENAI_API_KEY:your-api-key}
        endpoint: ${AZURE_OPENAI_ENDPOINT:your-endpoint}
    ollama:
      base-url: http://localhost:11434
```

### 3. è¿è¡Œé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
cd Spring-AI-Demo/Spring-AI-Dependency

# æ„å»ºé¡¹ç›®
mvn clean install

# è¿è¡Œé¡¹ç›®
mvn spring-boot:run
```

### 4. è®¿é—® API

é¡¹ç›®å¯åŠ¨åï¼Œè®¿é—®ä»¥ä¸‹ç«¯ç‚¹ï¼š

- **å¥åº·æ£€æŸ¥**: http://localhost:8080/actuator/health
- **èŠå¤©æ¥å£**: http://localhost:8080/api/chat
- **åµŒå…¥æ¥å£**: http://localhost:8080/api/embedding
- **å‘é‡å­˜å‚¨**: http://localhost:8080/api/vector
- **æ–‡æ¡£åŠ è½½**: http://localhost:8080/api/document

## ğŸ“‹ ä¾èµ–åˆ†ç±»

### 1. åŸºç¡€æ ¸å¿ƒ (3 ä¸ª)

| ä¾èµ– | è¯´æ˜ |
|------|------|
| `spring-ai-core` | æ ¸å¿ƒæŠ½è±¡å±‚ |
| `spring-ai-annotations` | æ³¨è§£æ¨¡å— |
| `spring-ai-bom` | BOM ç‰ˆæœ¬ç®¡ç† |

### 2. Spring Boot Starter (2 ä¸ª)

| ä¾èµ– | è¯´æ˜ |
|------|------|
| `spring-ai-spring-boot-starter` | ç»Ÿä¸€å…¥å£ Starter |
| `spring-ai-webmvc-starter` | REST API Starter |

### 3. LLM æä¾›å•† (9 ä¸ª)

| ä¾èµ– | æä¾›å•† |
|------|--------|
| `spring-ai-openai-spring-boot-starter` | OpenAI |
| `spring-ai-azure-openai-spring-boot-starter` | Azure OpenAI |
| `spring-ai-ollama-spring-boot-starter` | Ollama |
| `spring-ai-anthropic-spring-boot-starter` | Anthropic Claude |
| `spring-ai-gemini-spring-boot-starter` | Google Gemini |
| `spring-ai-cohere-spring-boot-starter` | Cohere |
| `spring-ai-mistral-spring-boot-starter` | Mistral AI |
| `spring-ai-huggingface-spring-boot-starter` | HuggingFace |
| `spring-ai-vertexai-spring-boot-starter` | Google Vertex AI |

### 4. å‘é‡å­˜å‚¨ (6 ä¸ª)

| ä¾èµ– | æ•°æ®åº“ |
|------|--------|
| `spring-ai-pgvector-store-spring-boot-starter` | PostgreSQL + pgvector |
| `spring-ai-milvus-store-spring-boot-starter` | Milvus |
| `spring-ai-qdrant-store-spring-boot-starter` | Qdrant |
| `spring-ai-chroma-store-spring-boot-starter` | ChromaDB |
| `spring-ai-redis-store-spring-boot-starter` | Redis |
| `spring-ai-elasticsearch-store-spring-boot-starter` | Elasticsearch |

### 5. æ–‡æ¡£åŠ è½½å™¨ (4 ä¸ª)

| ä¾èµ– | æ”¯æŒæ ¼å¼ |
|------|----------|
| `spring-ai-document-loader-pdf-spring-boot-starter` | PDF |
| `spring-ai-document-loader-docx-spring-boot-starter` | Word |
| `spring-ai-document-loader-markdown-spring-boot-starter` | Markdown |
| `spring-ai-document-loader-web-spring-boot-starter` | Web (HTTP/HTTPS) |

### 6. å®ç”¨å·¥å…· (5 ä¸ª)

| ä¾èµ– | åŠŸèƒ½ |
|------|------|
| `spring-ai-prompt-template` | Prompt æ¨¡æ¿ |
| `spring-ai-evaluation` | æ¨¡å‹è¯„ä¼° |
| `spring-ai-agent` | Agent æ¡†æ¶ |
| `spring-ai-chat-client` | èŠå¤©å®¢æˆ·ç«¯ |
| `spring-ai-embeddings-openai-spring-boot-starter` | OpenAI Embeddings |

### 7. æµ‹è¯•ä¾èµ– (2 ä¸ª)

| ä¾èµ– | è¯´æ˜ |
|------|------|
| `spring-ai-test` | æµ‹è¯•å·¥å…· |
| `spring-ai-boot-test-starter` | Boot æµ‹è¯• Starter |

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: ä½¿ç”¨ OpenAI èŠå¤©

```java
@RestController
@RequestMapping("/api/chat")
public class ChatModelController {
    
    @Autowired
    private ChatModel chatModel;
    
    @PostMapping("/openai")
    public String chat(@RequestBody String message) {
        return chatModel.call(message);
    }
}
```

### ç¤ºä¾‹ 2: ä½¿ç”¨å‘é‡å­˜å‚¨

```java
@Service
public class VectorStoreService {
    
    @Autowired
    private VectorStore vectorStore;
    
    @Autowired
    private EmbeddingModel embeddingModel;
    
    public void addDocument(String content) {
        Document doc = new Document(content);
        List<Double> embedding = embeddingModel.embed(content);
        doc.setEmbedding(embedding);
        vectorStore.add(List.of(doc));
    }
    
    public List<Document> search(String query, int topK) {
        List<Double> queryEmbedding = embeddingModel.embed(query);
        return vectorStore.similaritySearch(
            SearchRequest.query(query)
                .withTopK(topK)
        );
    }
}
```

### ç¤ºä¾‹ 3: åŠ è½½ PDF æ–‡æ¡£

```java
@Service
public class DocumentService {
    
    @Autowired
    private DocumentLoader pdfLoader;
    
    public List<Document> loadPdf(String filePath) {
        return pdfLoader.load(filePath);
    }
}
```

## ğŸ“Š ä¾èµ–é€‰æ‹©å»ºè®®

### å¼€å‘ç¯å¢ƒæ¨è

```xml
<!-- Ollama (æœ¬åœ°å…è´¹) + Simple Vector Store -->
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-ollama-spring-boot-starter</artifactId>
</dependency>
```

### ç”Ÿäº§ç¯å¢ƒæ¨è

```xml
<!-- Azure OpenAI (ä¼ä¸šçº§) + PGVector (ç¨³å®š) -->
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-azure-openai-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-pgvector-store-spring-boot-starter</artifactId>
</dependency>
```

### é«˜æ€§èƒ½åœºæ™¯æ¨è

```xml
<!-- OpenAI + Milvus (é«˜æ€§èƒ½å‘é‡æ•°æ®åº“) -->
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-openai-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-milvus-store-spring-boot-starter</artifactId>
</dependency>
```

## ğŸ”§ é…ç½®è¯´æ˜

### OpenAI é…ç½®

```yaml
spring:
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://api.openai.com
      chat:
        options:
          model: gpt-4
          temperature: 0.7
```

### Ollama é…ç½®

```yaml
spring:
  ai:
    ollama:
      base-url: http://localhost:11434
      chat:
        options:
          model: llama3
```

### PGVector é…ç½®

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/vectordb
    username: postgres
    password: postgres
  ai:
    vectorstore:
      pgvector:
        dimensions: 1536
        distance-type: COSINE_DISTANCE
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Demo.md](./Demo.md) - å®Œæ•´çš„ä¾èµ–åˆ—è¡¨å’Œè¯´æ˜
- [DEPENDENCY_CATEGORIES.md](./DEPENDENCY_CATEGORIES.md) - ä¾èµ–åˆ†ç±»è¯¦è§£
- [QUICK_START.md](./QUICK_START.md) - å¿«é€Ÿå¼€å§‹æŒ‡å—
- [Spring AI å®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
