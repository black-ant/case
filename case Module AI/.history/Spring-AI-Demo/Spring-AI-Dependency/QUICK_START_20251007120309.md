# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

### 1. æœ€ç®€å•çš„æ–¹å¼ï¼šä½¿ç”¨ Ollamaï¼ˆæœ¬åœ°å…è´¹ï¼‰

#### æ­¥éª¤ 1: å®‰è£… Ollama

```bash
# macOS/Linux
curl -fsSL https://ollama.com/install.sh | sh

# Windows
# ä¸‹è½½å®‰è£…åŒ…: https://ollama.com/download
```

#### æ­¥éª¤ 2: ä¸‹è½½æ¨¡å‹

```bash
# ä¸‹è½½ Llama 3 æ¨¡å‹ï¼ˆæ¨èï¼‰
ollama pull llama3

# ä¸‹è½½åµŒå…¥æ¨¡å‹
ollama pull nomic-embed-text
```

#### æ­¥éª¤ 3: å¯åŠ¨ Ollama

```bash
ollama serve
```

#### æ­¥éª¤ 4: è¿è¡Œé¡¹ç›®

```bash
cd Spring-AI-Demo/Spring-AI-Dependency
mvn spring-boot:run
```

#### æ­¥éª¤ 5: æµ‹è¯• API

```bash
# èŠå¤©æµ‹è¯•
curl -X POST http://localhost:8080/api/chat/simple \
  -H "Content-Type: application/json" \
  -d '{"message": "ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ Spring AI"}'

# åµŒå…¥æµ‹è¯•
curl -X POST http://localhost:8080/api/embedding/single \
  -H "Content-Type: application/json" \
  -d '{"text": "Spring AI æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶"}'
```

---

## ğŸ”‘ ä½¿ç”¨ OpenAIï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰

### æ­¥éª¤ 1: è·å– API Key

è®¿é—® [OpenAI Platform](https://platform.openai.com/api-keys) è·å– API Key

### æ­¥éª¤ 2: è®¾ç½®ç¯å¢ƒå˜é‡

```bash
# Linux/macOS
export OPENAI_API_KEY=your-api-key-here

# Windows PowerShell
$env:OPENAI_API_KEY="your-api-key-here"

# Windows CMD
set OPENAI_API_KEY=your-api-key-here
```

### æ­¥éª¤ 3: ä¿®æ”¹é…ç½®

ç¼–è¾‘ `application.yml`ï¼Œç¡®ä¿ OpenAI é…ç½®æ­£ç¡®ï¼š

```yaml
spring:
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      chat:
        options:
          model: gpt-4
```

### æ­¥éª¤ 4: è¿è¡Œå¹¶æµ‹è¯•

```bash
mvn spring-boot:run

# æµ‹è¯•
curl -X POST http://localhost:8080/api/chat/simple \
  -H "Content-Type: application/json" \
  -d '{"message": "è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ RAG"}'
```

---

## ğŸ“Š ä½¿ç”¨å‘é‡æ•°æ®åº“

### é€‰é¡¹ 1: ä½¿ç”¨ PostgreSQL + PGVector

#### æ­¥éª¤ 1: å®‰è£… PostgreSQL

```bash
# macOS
brew install postgresql

# Ubuntu
sudo apt-get install postgresql

# æˆ–ä½¿ç”¨ Docker
docker run -d \
  --name postgres-pgvector \
  -e POSTGRES_PASSWORD=postgres \
  -e POSTGRES_DB=vectordb \
  -p 5432:5432 \
  ankane/pgvector
```

#### æ­¥éª¤ 2: å¯ç”¨ PGVector æ‰©å±•

```sql
CREATE EXTENSION vector;
```

#### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

```bash
export POSTGRES_HOST=localhost
export POSTGRES_PORT=5432
export POSTGRES_DB=vectordb
export POSTGRES_USER=postgres
export POSTGRES_PASSWORD=postgres
```

#### æ­¥éª¤ 4: æµ‹è¯•å‘é‡å­˜å‚¨

```bash
# æ·»åŠ æ–‡æ¡£
curl -X POST http://localhost:8080/api/vector/add \
  -H "Content-Type: application/json" \
  -d '{"content": "Spring AI æ˜¯ä¸€ä¸ªç”¨äºæ„å»º AI åº”ç”¨çš„æ¡†æ¶"}'

# æœç´¢
curl -X POST http://localhost:8080/api/vector/search \
  -H "Content-Type: application/json" \
  -d '{"query": "ä»€ä¹ˆæ˜¯ Spring AI", "topK": 5}'
```

### é€‰é¡¹ 2: ä½¿ç”¨ Chromaï¼ˆæœ€ç®€å•ï¼‰

#### æ­¥éª¤ 1: å¯åŠ¨ Chroma

```bash
# ä½¿ç”¨ Docker
docker run -d \
  --name chromadb \
  -p 8000:8000 \
  chromadb/chroma
```

#### æ­¥éª¤ 2: é…ç½®

```yaml
spring:
  ai:
    vectorstore:
      chroma:
        base-url: http://localhost:8000
        collection-name: spring_ai_collection
```

---

## ğŸ“„ æ–‡æ¡£å¤„ç†ç¤ºä¾‹

### åŠ è½½ PDF æ–‡æ¡£

```bash
# ä¸Šä¼ å¹¶åŠ è½½ PDF
curl -X POST http://localhost:8080/api/document/load-pdf \
  -F "file=@/path/to/your/document.pdf"

# åŠ è½½å¹¶åˆ†å‰²æ–‡æ¡£
curl -X POST "http://localhost:8080/api/document/load-and-split?chunkSize=1000&chunkOverlap=200" \
  -F "file=@/path/to/your/document.pdf"
```

### ä» URL åŠ è½½

```bash
curl -X POST http://localhost:8080/api/document/load-url \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/article"}'
```

---

## ğŸ§ª å®Œæ•´çš„ RAG æµç¨‹ç¤ºä¾‹

### 1. å‡†å¤‡æ–‡æ¡£

```bash
# åŠ è½½å¹¶åˆ†å‰²æ–‡æ¡£
curl -X POST "http://localhost:8080/api/document/load-and-split?chunkSize=500" \
  -F "file=@knowledge.pdf" \
  > chunks.json
```

### 2. å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“

```bash
# æ‰¹é‡æ·»åŠ æ–‡æ¡£å—
curl -X POST http://localhost:8080/api/vector/add-batch \
  -H "Content-Type: application/json" \
  -d '{"contents": ["æ–‡æ¡£å—1", "æ–‡æ¡£å—2", "æ–‡æ¡£å—3"]}'
```

### 3. æ£€ç´¢ç›¸å…³å†…å®¹

```bash
# æœç´¢ç›¸å…³æ–‡æ¡£
curl -X POST http://localhost:8080/api/vector/search \
  -H "Content-Type: application/json" \
  -d '{"query": "ç”¨æˆ·çš„é—®é¢˜", "topK": 3}'
```

### 4. ç”Ÿæˆå›ç­”

```bash
# ä½¿ç”¨æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”
curl -X POST http://localhost:8080/api/chat/simple \
  -H "Content-Type: application/json" \
  -d '{"message": "åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ï¼š[æ£€ç´¢åˆ°çš„å†…å®¹]"}'
```

---

## ğŸ” å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:8080/actuator/health

# æ£€æŸ¥å„ä¸ªæœåŠ¡
curl http://localhost:8080/api/chat/health
curl http://localhost:8080/api/embedding/health
curl http://localhost:8080/api/vector/health
curl http://localhost:8080/api/document/health
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: Ollama è¿æ¥å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ Ollama æ­£åœ¨è¿è¡Œ
ollama serve

# æ£€æŸ¥ç«¯å£
curl http://localhost:11434/api/tags
```

### Q2: OpenAI API è°ƒç”¨å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
echo $OPENAI_API_KEY

# æµ‹è¯• API Key
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"
```

### Q3: å‘é‡æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦è¿è¡Œ
docker ps | grep postgres

# æµ‹è¯•è¿æ¥
psql -h localhost -U postgres -d vectordb
```

### Q4: å†…å­˜ä¸è¶³ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å¢åŠ  JVM å†…å­˜
export MAVEN_OPTS="-Xmx2g"
mvn spring-boot:run
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æŸ¥çœ‹å®Œæ•´æ–‡æ¡£**: [README.md](./README.md)
2. **äº†è§£ä¾èµ–è¯¦æƒ…**: [Demo.md](./Demo.md)
3. **å­¦ä¹ æœ€ä½³å®è·µ**: [DEPENDENCY_CATEGORIES.md](./DEPENDENCY_CATEGORIES.md)
4. **æ¢ç´¢å…¶ä»–ç¤ºä¾‹**: 
   - [Multi-LLM-Provider](../Multi-LLM-Provider/)
   - [RAG-Demo](../RAG-Demo/)
   - [Agent-Workflow-Demo](../Agent-Workflow-Demo/)

---

## ğŸ’¡ æç¤º

- å¼€å‘ç¯å¢ƒæ¨èä½¿ç”¨ **Ollama**ï¼ˆå…è´¹ã€æœ¬åœ°ï¼‰
- ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨ **Azure OpenAI** æˆ– **AWS Bedrock**ï¼ˆä¼ä¸šçº§ï¼‰
- å‘é‡æ•°æ®åº“æ¨è **PGVector**ï¼ˆå¼€æºã€ç¨³å®šï¼‰æˆ– **Pinecone**ï¼ˆæ‰˜ç®¡ã€é«˜æ€§èƒ½ï¼‰
- è®°å¾—è®¾ç½®åˆç†çš„ **rate limiting** å’Œ **error handling**
