# Spring AI Demo 使用说明

## 📋 功能概览

demo.html 提供了三个独立的功能测试页面，帮助你快速测试 Spring AI 的核心功能。

## 🚀 快速开始

### 1. 启动 Spring Boot 应用

```bash
cd Sample-Spring-AI
mvn spring-boot:run
```

确保应用运行在 `http://localhost:8080`

### 2. 打开测试页面

在浏览器中打开 `Sample-Spring-AI/demo.html` 文件

## 📝 功能说明

### Tab 1: 直接询问

**API 接口**: `POST /api/chat/simple`

**功能特点**:
- 等待 AI 生成完整回复后一次性返回
- 适合需要完整结果的场景
- 简单直接，易于处理

**测试示例**:
```
你好，请用一句话介绍一下 Spring AI 框架
```

**使用场景**:
- 简短问答
- 需要完整结果再处理的场景
- 批量处理任务

---

### Tab 2: 流式询问

**API 接口**: `POST /api/chat/stream`

**功能特点**:
- 使用 Server-Sent Events (SSE) 实时推送响应片段
- 实时显示 AI 生成过程
- 提供更好的用户体验
- 支持停止功能

**测试示例**:
```
请详细介绍一下 Spring Boot 的核心特性
```

**使用场景**:
- 长文本生成
- 需要实时反馈的场景
- 提升用户体验

**特色功能**:
- 🔵 实时生成指示器（蓝色脉动点）
- 🛑 停止按钮（可中断生成）
- ⚡ 逐字显示效果

---

### Tab 3: 历史记录功能

**API 接口**: `POST /api/advanced/chat-with-history`

**功能特点**:
- AI 会记住之前的对话内容
- 实现上下文连贯的多轮对话
- 自动维护对话历史
- 可视化历史记录展示

**测试示例**:

第一轮：
```
我的名字是张三，我喜欢编程
```

第二轮：
```
你还记得我的名字吗？
```

第三轮：
```
我喜欢什么？
```

**使用场景**:
- 多轮对话
- 需要上下文理解的场景
- 客服机器人
- 智能助手

**特色功能**:
- 👤 用户消息标识
- 🤖 AI 回复标识
- 📜 历史记录滚动显示
- 🗑️ 清空历史功能

---

## 🎨 界面特点

- **美观的渐变设计**: 紫色渐变背景
- **响应式布局**: 适配不同屏幕尺寸
- **加载动画**: 旋转加载指示器
- **错误提示**: 友好的错误信息展示
- **实时反馈**: 流式生成的视觉效果

## 🔧 技术细节

### API 请求格式

**直接询问**:
```json
{
  "message": "你的问题"
}
```

**流式询问**:
```json
{
  "message": "你的问题"
}
```

**历史记录**:
```json
{
  "message": "你的问题",
  "history": [
    "User: 第一轮用户消息",
    "Assistant: 第一轮AI回复",
    "User: 第二轮用户消息",
    "Assistant: 第二轮AI回复"
  ]
}
```

### 响应格式

**直接询问**: 纯文本
**流式询问**: Server-Sent Events (SSE)
```
data: 文本片段1
data: 文本片段2
...
```

**历史记录**: 纯文本

## 🐛 常见问题

### 1. 连接失败

**问题**: 请求失败: Failed to fetch

**解决方案**:
- 确保 Spring Boot 应用正在运行
- 检查端口是否为 8080
- 检查防火墙设置

### 2. CORS 错误

**问题**: Access-Control-Allow-Origin 错误

**解决方案**:
- 确保 WebClientConfig 中已配置 CORS
- 或者使用浏览器插件临时禁用 CORS

### 3. 流式响应不显示

**问题**: 流式询问没有实时显示

**解决方案**:
- 检查浏览器是否支持 SSE
- 查看浏览器控制台是否有错误
- 确认后端正确返回 text/event-stream

## 💡 最佳实践

1. **直接询问**: 适合简短、明确的问题
2. **流式询问**: 适合需要详细解释的问题
3. **历史记录**: 适合需要上下文的连续对话

## 📚 相关文档

- [Spring AI 官方文档](https://docs.spring.io/spring-ai/reference/)
- [ChatClient 配置指南](./CHATSERVICE-GUIDE.txt)
- [项目快速参考](./QUICK-REFERENCE.txt)

## 🎯 下一步

尝试以下高级功能：
1. 修改系统提示词（在 AdvancedChatController 中）
2. 调整 temperature 参数控制创造性
3. 配置 maxTokens 限制输出长度
4. 集成到你的实际项目中

---

**祝你使用愉快！** 🎉
